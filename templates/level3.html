<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£—Ä–æ–≤–µ–Ω—å 3 - –°–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –ø–æ–¥–∞—Ä–æ–∫</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="level-screen">
    <div class="container">
        <h2>–£—Ä–æ–≤–µ–Ω—å 3: –°–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –ø–æ–¥–∞—Ä–æ–∫</h2>
        <p class="question">–ú–æ–π —Å–∞–º—ã–π –ª—é–±–∏–º—ã–π –ø–æ–¥–∞—Ä–æ–∫ –æ—Ç —Ç–µ–±—è?</p>

        <div class="options options-same-color">
            <button class="option-btn" data-answer="—Ä—É–º–±–æ–∫—Å">–†—É–º–±–æ–∫—Å</button>
            <button class="option-btn" data-answer="–≥—É—Å—å">–ì—É—Å—å</button>
            <button class="option-btn" data-answer="—É–ª—ã–±–∞—à–∫–∞">–°—á–∞—Å—Ç–ª–∏–≤—ã–π</button>
            <button class="option-btn" data-answer="—Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –∫—É—Ä–∞–ø–∏–∫–∞">–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –ö—É—Ä–∞–ø–∏–∫–∞</button>
        </div>

        <div id="feedback" class="feedback"></div>

        <div id="success-content" style="display:none;">
            <div class="heart-animation">üíù</div>
            <p class="success-message">–î–∞! –ò–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç!</p>

            <div class="image-box">
    <img src="{{ url_for('static', filename='image/smiley_toy.jpg') }}" alt="–£–ª—ã–±–∞—à–∫–∞" class="fill-max-size">
</div>

            <p class="caption">–≠—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ –±—ã–ª —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–º, –ø–æ—ç—Ç–æ–º—É –æ—á–µ–Ω—å –∏—Å–∫—Ä–µ–Ω–Ω–∏–º, –æ–Ω –¥–æ —Å–∏—Ö –ø–æ—Ä –≥—Ä–µ–µ—Ç –¥—É—à—É.</p>

            <div class="memory-box">
                <p>–¢—ã –ø–æ–º–Ω–∏—à—å, –∫–∞–∫ —Ç—ã –¥–∞—Ä–∏–ª –µ–≥–æ? –ë—ã–ª–æ –æ—á–µ–Ω—å –º–∏–ª–æ</p>
            </div>

            <a href="{{ url_for('final') }}" class="btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–ª–∏–∫–æ–º</a>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        document.querySelectorAll('.option-btn').forEach(button => {
            button.addEventListener('click', function() {
                const answer = this.getAttribute('data-answer');
                const feedback = document.getElementById('feedback');
                const successContent = document.getElementById('success-content');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
                const isCorrect = answer === '—É–ª—ã–±–∞—à–∫–∞';

                if (isCorrect) {
                    // –í–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                    this.classList.add('correct');
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                    fetch('/level/3', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: 'answer=' + encodeURIComponent(answer)
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.correct) {
                            feedback.innerHTML = '<p class="correct-feedback">–¢–æ—á–Ω–æ! –¢—ã –ø–æ–º–Ω–∏—à—å!</p>';
                            setTimeout(() => {
                                successContent.style.display = 'block';
                                successContent.style.animation = 'fadeIn 1s ease';
                            }, 800);
                        }
                    });
                } else {
                    feedback.innerHTML = '<p class="wrong-feedback">–¢—ã –∂–µ –∑–Ω–∞–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç... –í—Å–ø–æ–º–Ω–∏!</p>';
                }
            });
        });
    </script>
</body>
</html>
